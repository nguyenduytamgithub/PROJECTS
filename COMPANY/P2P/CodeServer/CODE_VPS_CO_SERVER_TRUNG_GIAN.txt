CODE VPS NODE CÓ SERVER TRUNG GIAN
[{"id":"7421128d.3de57c","type":"mqtt in","z":"1d434acf.34bdc5","name":"","topic":"elefos001","qos":"2","broker":"c126cfbc.47254","x":100,"y":280,"wires":[["194fe75f.5d7959"]]},{"id":"194fe75f.5d7959","type":"json","z":"1d434acf.34bdc5","name":"","property":"payload","action":"","pretty":false,"x":270,"y":240,"wires":[["e5ebb231.ca278","eaaed380.0a583"]]},{"id":"d675e391.65cf9","type":"mqtt out","z":"1d434acf.34bdc5","name":"","topic":"","qos":"","retain":"","broker":"f2907e98.1fb2d","x":690,"y":280,"wires":[]},{"id":"3fd3f71f.43be48","type":"function","z":"1d434acf.34bdc5","name":"","func":"let to = msg.payload.to\nlet from = msg.topic\nlet content = msg.payload.content\nmsg.payload = {\n    \"from\": from,\n    \"to\": to,\n    \"content\" : content\n}\nmsg.topic = \"LISTENING\"\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":280,"wires":[["d675e391.65cf9","90e9f07d.4e603"]]},{"id":"e5ebb231.ca278","type":"debug","z":"1d434acf.34bdc5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":430,"y":200,"wires":[]},{"id":"eaaed380.0a583","type":"switch","z":"1d434acf.34bdc5","name":"","property":"payload.to","propertyType":"msg","rules":[{"t":"null"},{"t":"nnull"}],"checkall":"true","repair":false,"outputs":2,"x":410,"y":280,"wires":[[],["3fd3f71f.43be48"]]},{"id":"90e9f07d.4e603","type":"debug","z":"1d434acf.34bdc5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":680,"y":380,"wires":[]},{"id":"e1dc09cf.0abe18","type":"mqtt in","z":"1d434acf.34bdc5","name":"","topic":"elefos001","qos":"2","broker":"f2907e98.1fb2d","x":100,"y":200,"wires":[["194fe75f.5d7959"]]},{"id":"c126cfbc.47254","type":"mqtt-broker","z":"","name":"","broker":"localhost","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"f2907e98.1fb2d","type":"mqtt-broker","z":"","name":"Server chính","broker":"142.93.252.222","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""}]